<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>운세 웹사이트</title>
</head>
<body>
  <h1>오늘의 운세</h1>

  <form action="/result" method="post">
    <label>이름 (한글): <input type="text" id="koreanName" name="name" required></label>
    <button type="button" onclick="searchHanja()">한자 추천</button><br>

    <label>이름 (한자): <input type="text" id="hanjaName" name="hanja_name" required></label><br>
    <div id="hanjaSuggestions" style="margin:10px 0;"></div>

    <label>생년: <input type="number" name="year" required></label><br>
    <label>월: <input type="number" name="month" required></label><br>
    <label>일: <input type="number" name="day" required></label><br>

    <button type="submit">운세 확인</button>
  </form>

  <script>
    function searchHanja() {
      const name = document.getElementById("koreanName").value;
      if (!name) return alert("한글 이름을 입력하세요!");

      fetch(`/search_hanja?name=${encodeURIComponent(name)}`)
        .then(res => res.json())
        .then(data => {
          const container = document.getElementById("hanjaSuggestions");
          container.innerHTML = "";
          if (data.options.length === 0) {
            container.innerHTML = "<p>추천 한자가 없습니다.</p>";
            return;
          }

          data.options.forEach(h => {
            const span = document.createElement("span");
            span.textContent = h;
            span.style.cursor = "pointer";
            span.style.marginRight = "10px";
            span.onclick = () => document.getElementById("hanjaName").value = h;
            container.appendChild(span);
          });
        });
    }
  </script>
</body>
</html>
